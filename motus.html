<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Motus</title>
    <script src="https://unpkg.com/alpinejs" defer></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
        }
        .motus-container {
            text-align: center;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(5, 50px);
            gap: 10px;
        }
        .cell {
            width: 50px;
            height: 50px;
            font-size: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ccc;
            background-color: white;
        }
        .correct { background-color: red; }
        .present { background-color: yellow; }
        .absent { background-color: lightgray; }
        .input-row {
            margin-top: 20px;
        }
        input {
            padding: 10px;
            font-size: 16px;
            width: 150px;
            margin-right: 10px;
        }
        button {
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="motus-container" x-data="motusGame()">
    <h1>Motus</h1>

    <!-- Grille -->
    <div class="grid">
        <template x-for="(letter, index) in guessedLetters">
            <div class="cell" :class="{'correct': correctPositions[index], 'present': presentLetters[index], 'absent': !correctPositions[index] && !presentLetters[index]}">
                <span x-text="letter"></span>
            </div>
        </template>
    </div>

    <!-- Champ de saisie du mot -->
    <div class="input-row">
        <input type="text" x-model="currentGuess" maxlength="5" placeholder="Devine le mot">
        <button @click="submitGuess">Envoyer</button>
    </div>

    <p x-text="message" style="margin-top: 20px;"></p>
</div>

<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
<script>
    function motusGame() {
        return {
            // Liste de mots pré-définis (tu peux ajouter plus de mots ici)
            words: ["chien", "table", "chaud", "mango", "lapin", "fruit", "plage"],

            // Variables pour stocker le mot aléatoire et les essais
            secretWord: '',
            guessedLetters: ['', '', '', '', ''],
            correctPositions: [false, false, false, false, false],
            presentLetters: [false, false, false, false, false],
            currentGuess: '',
            message: '',

            // Initialisation du jeu
            init() {
                this.generateRandomWord();
            },

            // Générer un mot aléatoire depuis la liste
            generateRandomWord() {
                const randomIndex = Math.floor(Math.random() * this.words.length);
                this.secretWord = this.words[randomIndex];
                console.log("Mot secret : ", this.secretWord);  // Pour debug
            },

            // Soumettre le mot deviné
            submitGuess() {
                if (this.currentGuess.length !== 5) {
                    this.message = "Le mot doit comporter 5 lettres.";
                    return;
                }

                // Reset des états de chaque lettre pour ce tour
                this.correctPositions = [false, false, false, false, false];
                this.presentLetters = [false, false, false, false, false];

                // Vérification de chaque lettre
                for (let i = 0; i < 5; i++) {
                    const guessedLetter = this.currentGuess[i];
                    this.guessedLetters[i] = guessedLetter;

                    if (this.secretWord[i] === guessedLetter) {
                        // Lettre à la bonne position
                        this.correctPositions[i] = true;
                    } else if (this.secretWord.includes(guessedLetter)) {
                        // Lettre présente mais à la mauvaise position
                        this.presentLetters[i] = true;
                    }
                }

                // Vérification si le mot est correct
                if (this.currentGuess === this.secretWord) {
                    this.message = "Bravo ! Vous avez trouvé le mot.";
                } else {
                    this.message = "Essayez encore !";
                    alert(this.currentGuess);
                }

                // Reset de l'input
                this.currentGuess = '';
            }
        }
    }
</script>

</body>
</html>
